{{/* 侧栏：置顶文章 */}}
<div class="sidebar-block pinned-posts">
  <h3>置顶文章</h3>
  <ul>
    {{ $pinnedPages := where .Site.RegularPages "Type" "posts" }}
    {{ $pinnedPages = where $pinnedPages "Params.pinned" true }}
    {{ if $pinnedPages }}
      {{ range $pinnedPages }}
        <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
      {{ end }}
    {{ else }}
      <li style="color: #999; font-size: 0.9em;">暂无置顶文章</li>
    {{ end }}
  </ul>
</div>

{{/* 侧栏：近期文章（保持） */}}
<div class="sidebar-block recent-posts">
  <h3>近期文章</h3>
  <ul>
    {{ $pages := first 8 (where .Site.RegularPages "Type" "posts" ).ByDate.Reverse }}
    {{ range $pages }}
      <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
    {{ end }}
  </ul>
</div>

{{/* 仅当存在 data/comments.json 且含有评论时展示“最新评论” */}}
{{ with .Site.Data.comments }}
  {{ if gt (len .) 0 }}
    <div class="sidebar-block recent-comments">
      <h3>最新评论</h3>
      <div id="recent-comments-container">
        <ul>
        {{ $count := 0 }}
        {{ range $postpath, $cmts := . }}
          {{ range $i, $c := $cmts }}
            {{ if lt $count 6 }}
              <li class="rc-item"><a href="{{ $c.post_url }}">{{ $c.author }}：{{ (truncate 48 $c.body) }}</a></li>
              {{ $count = add $count 1 }}
            {{ end }}
          {{ end }}
        {{ end }}
        </ul>
      </div>
    </div>
  {{ end }}
{{ end }}

<div class="sidebar-block tips">
  <h3>快捷</h3>
  <ul>
    <li><a href="/archives/">文章归档</a></li>
  </ul>
</div>
