/* ========================================
   页面布局和网格系统
   ======================================== */

/* 布局容器 */
.container-article {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 28px;
  align-items: start;
  max-width: 1100px;
  margin: 0 auto;
  padding: 24px;
}

.main {
  grid-column: 1;
  min-width: 0;
}

.sidebar {
  grid-column: 2;
  width: 320px;
  position: sticky;
  top: 72px;
  align-self: flex-start;
}

/* 全站整体平移：为左侧 TOC 预留空间 */
.site-header, header, .container-article, .site-footer {
  transform: translateX(var(--ux-page-shift));
}

/* 在小屏上禁用页面右移 */
@media (max-width: 768px) {
  :root { --ux-page-shift: 0px; }
  .site-header, header, .container-article, .site-footer { 
    transform: none; 
  }
}

/* 保持正文宽度与旧版一致：约 752px（1100 - 320 - 28） */
.main .article {
  display: block;
  max-width: 752px;
  margin: 24px auto 40px;
  width: 100%;
  box-sizing: border-box;
  min-width: 0;
}

/* 在 Grid 布局下，确保主列不会因为子元素的短内容而缩小 */
.container-article {
  grid-auto-columns: 1fr;
}

.list .article {
  min-width: 0;
}

/* 列表项间距：文章卡片之间的垂直间隙 */
.list .article {
  margin-bottom: 48px;
  padding: 0;
  border: none;
}

.list .article:last-child {
  margin-bottom: 0;
}

/* 侧栏块 */
.sidebar-block {
  background: var(--card-bg);
  padding: 16px;
  border-radius: 8px;
  margin-bottom: 16px;
}

.sidebar-block h3 {
  margin: 0 0 8px 0;
  font-size: 1rem;
}

.sidebar-block ul {
  margin: 0;
  padding-left: 1rem;
}

.sidebar-block li {
  margin: 6px 0;
}

/* 响应式 - 移动端布局修复 */
@media (max-width: 900px) {
  .container-article {
    display: grid;
    grid-template-columns: 1fr !important;
    gap: 16px;
    padding: 12px;
  }
  
  .main {
    grid-column: 1 !important;
    width: 100% !important;
    margin: 0 !important;
  }
  
  .sidebar {
    display: none !important;
    grid-column: auto;
    width: 100% !important;
  }
  
  .main .article {
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
}

@media (max-width: 600px) {
  .container-article {
    padding: 8px;
    gap: 12px;
  }
  
  .main .article {
    margin: 0 !important;
    padding: 0 8px !important;
  }
}

/* 移动端横屏：列表采用两栏布局以改善阅读 */
@media (max-width: 1024px) and (orientation: landscape) {
  .list .main {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
  }

  .list .article {
    width: calc(50% - 12px);
    box-sizing: border-box;
    margin: 8px 0;
    padding: 10px;
    border-bottom: none;
  }
}
